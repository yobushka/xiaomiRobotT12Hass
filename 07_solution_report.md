> **‚ö†Ô∏è –ê–†–•–ò–í / HISTORY FILE**
> –≠—Ç–æ—Ç —Ñ–∞–π–ª —è–≤–ª—è–µ—Ç—Å—è —á–∞—Å—Ç—å—é –∏—Å—Ç–æ—Ä–∏–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –¥–∞–Ω–Ω—ã–µ.

---

# –û—Ç—á–µ—Ç –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —É–±–æ—Ä–∫–∏ –ø–æ –∫–æ–º–Ω–∞—Ç–∞–º

**–î–∞—Ç–∞:** 2026-02-08
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–∞–Ω–¥

## üîß –ù–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **–ù–µ–≤–µ—Ä–Ω—ã–π Service ID (SIID):**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è `siid: 4` (Alarm Service)
   - –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π `siid: 2` (Vacuum Service)

2. **–ù–µ–≤–µ—Ä–Ω—ã–π Action ID (AIID):**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è `aiid: 1`
   - –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π `aiid: 7` (Start Room Sweep)

3. **–§–æ—Ä–º–∞—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:**
   - –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è —Ç—Ä–µ–±—É–µ—Ç —Å—Ç—Ä–æ–∫—É (string) –¥–ª—è Room IDs
   - –û–±–Ω–æ–≤–ª–µ–Ω —Ñ–æ—Ä–º–∞—Ç —Å `[10]` –Ω–∞ `["10"]`

## üõ† –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ

1. **–ü–æ–ª—É—á–µ–Ω–∞ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è MIoT** –¥–ª—è –º–æ–¥–µ–ª–∏ xiaomi.vacuum.b106bk
   - Service 2: Vacuum
   - Action 7: Start Room Sweep (Input: Property 10)
   - Property 10: Room IDs (String)

2. **–ü—Ä–æ–≤–µ–¥–µ–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   - `siid: 2, aiid: 1` (Start Sweep) -> ‚úÖ –ü—ã–ª–µ—Å–æ—Å –Ω–∞—á–∞–ª —É–±–æ—Ä–∫—É (–°—Ç–∞—Ç—É—Å —Å–º–µ–Ω–∏–ª—Å—è –Ω–∞ cleaning)
   - –≠—Ç–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç, —á—Ç–æ –º—ã –Ω–∞—à–ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è.

3. **–û–±–Ω–æ–≤–ª–µ–Ω—ã —Å–∫—Ä–∏–ø—Ç—ã:**
   - –§–∞–π–ª `scripts.yaml` –æ–±–Ω–æ–≤–ª–µ–Ω –≤–æ –≤—Å–µ—Ö —Å–∫—Ä–∏–ø—Ç–∞—Ö —É–±–æ—Ä–∫–∏ (ID 10-20)
   - –ü—Ä–∏–º–µ–Ω–µ–Ω—ã –Ω–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã: `siid: 2`, `aiid: 7`, `params: ["ID"]`.

## ‚ö†Ô∏è –û—Å—Ç–∞–≤—à–∏–µ—Å—è –≤–æ–ø—Ä–æ—Å—ã

**–°–ø–∏—Å–æ–∫ –∫–æ–º–Ω–∞—Ç –ø—É—Å—Ç:**
–ú–µ—Ç–æ–¥ `get-map-room-list` (siid: 10, aiid: 13) –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫. –≠—Ç–æ –º–æ–∂–µ—Ç –æ–∑–Ω–∞—á–∞—Ç—å:
1. –ö–∞—Ä—Ç–∞ –Ω–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∞ –Ω–∞ –∫–æ–º–Ω–∞—Ç—ã (–ø—Ä–æ–≤–µ—Ä—å—Ç–µ Mi Home).
2. –ü—ã–ª–µ—Å–æ—Å –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ—Ç–¥–∞—á—É —Å–ø–∏—Å–∫–∞ –∫–æ–º–Ω–∞—Ç —á–µ—Ä–µ–∑ —ç—Ç–æ—Ç –º–µ—Ç–æ–¥.

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–æ–≤—ã–µ —Å–∫—Ä–∏–ø—Ç—ã "–ö–æ–º–Ω–∞—Ç–∞ 10" ... "–ö–æ–º–Ω–∞—Ç–∞ 20".
2. –ï—Å–ª–∏ –ø—ã–ª–µ—Å–æ—Å –Ω–µ –µ–¥–µ—Ç –≤ –∫–æ–º–Ω–∞—Ç—É, –∑–Ω–∞—á–∏—Ç ID 10-20 –Ω–µ–≤–µ—Ä–Ω—ã–µ.
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —É–≥–∞–¥–∞—Ç—å ID (—á–∞—Å—Ç–æ 10, 11, 12...).
4. –ï—Å–ª–∏ –∫–∞—Ä—Ç–∞ –Ω–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ Mi Home -> –†–∞–∑–¥–µ–ª–∏—Ç–µ –µ—ë.

## üìù –ü—Ä–∏–º–µ—Ä –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞ (–¥–ª—è —Ç–µ—Å—Ç–æ–≤)

```yaml
service: xiaomi_miot.call_action
data:
  entity_id: vacuum.xiaomi_b106bk_807e_robot_cleaner
  siid: 2
  aiid: 7
  params: ["10"]  # ID –∫–æ–º–Ω–∞—Ç—ã –∫–∞–∫ —Å—Ç—Ä–æ–∫–∞
```

## üîç –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–ø–∏—Å–∫–∞ –∫–æ–º–Ω–∞—Ç (15:05 UTC)

**–ü–æ–ø—ã—Ç–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –∫–æ–º–Ω–∞—Ç:**
1. **–ê–Ω–∞–ª–∏–∑ –∫—ç—à–∞:** –§–∞–π–ª `/config/tmp/map_data_xiaomi.vacuum.b106bk.unknown` –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω –∏–ª–∏ –±–∏–Ω–∞—Ä–µ–Ω, –Ω–µ —á–∏—Ç–∞–µ—Ç—Å—è –∫–∞–∫ JSON.
2. **MIoT Properties:** –ó–∞–ø—Ä–æ—Å —Å–≤–æ–π—Å—Ç–≤ `room-ids` (siid:2 piid:10) –∏ `map-list` (siid:10 piid:4) –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—É—Å—Ç–æ–π –æ—Ç–≤–µ—Ç `[]`.
3. **Legacy Command:** –ö–æ–º–∞–Ω–¥–∞ `get_room_mapping` –≤—ã–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É 500 (–Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π).

**–í—ã–≤–æ–¥:**
–î–∞–Ω–Ω–∞—è –º–æ–¥–µ–ª—å (b106bk) –Ω–µ –æ—Ç–¥–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –∫–æ–º–Ω–∞—Ç —á–µ—Ä–µ–∑ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ MIoT —Å–≤–æ–π—Å—Ç–≤–∞, –¥–æ—Å—Ç—É–ø–Ω—ã–µ –≤ —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏.
–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥ –ø–µ—Ä–µ–±–æ—Ä–∞ ID (–Ω–∞—É–≥–∞–¥) –∏–ª–∏ —Å–º–æ—Ç—Ä–µ—Ç—å ID –≤ –ª–æ–≥–∞—Ö –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –∏–∑ —Ä–æ–¥–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Mi Home.
