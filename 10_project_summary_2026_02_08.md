# üèÅ –ò—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á–µ—Ç –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ Xiaomi Robot Vacuum T12

**–î–∞—Ç–∞:** 2026-02-08
**–ó–∞–¥–∞—á–∞:** –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —É–±–æ—Ä–∫—É –ø–æ –∫–æ–º–Ω–∞—Ç–∞–º –≤ Home Assistant.
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –£—Å–ø–µ—à–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ.

## üè† –ö–∞—Ä—Ç–∞ –∫–æ–º–Ω–∞—Ç (Final Mapping)

| ID | –ö–æ–º–Ω–∞—Ç–∞ | Entity ID —Å–∫—Ä–∏–ø—Ç–∞ |
|----|----------|-------------------|
| **10** | üß∏ –î–µ—Ç—Å–∫–∞—è | `script.vacuum_clean_room_10` |
| **11** | üç≥ –ö—É—Ö–Ω—è | `script.vacuum_clean_room_11` |
| **12** | üõèÔ∏è –°–ø–∞–ª—å–Ω—è | `script.vacuum_clean_room_12` |
| **13** | üö∂ –ö–æ—Ä–∏–¥–æ—Ä | `script.vacuum_clean_room_13` |

## ‚öôÔ∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- **–ú–æ–¥–µ–ª—å:** xiaomi.vacuum.b106bk (Xiaomi Robot Vacuum T12)
- **–ü—Ä–æ—Ç–æ–∫–æ–ª:** MIoT

### –†–∞–±–æ—á–∞—è –∫–æ–º–∞–Ω–¥–∞ (The Solution)
–î–ª—è —ç—Ç–æ–π –º–æ–¥–µ–ª–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã `app_segment_clean` –∏–ª–∏ Service 2 (Vacuum) –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –¥–ª—è –∫–æ–º–Ω–∞—Ç.
–†–∞–±–æ—á–∏–º –æ–∫–∞–∑–∞–ª—Å—è **Service 7 (Sweep)**.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≤—ã–∑–æ–≤–∞:**
- **Service ID (siid):** 7
- **Action ID (aiid):** 3 (`set-room-clean`)
- **Params:** `["ID", 0, 1]`
  - `"ID"`: ID –∫–æ–º–Ω–∞—Ç—ã –≤ –≤–∏–¥–µ —Å—Ç—Ä–æ–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "10")
  - `0`: Mode (0=Global/Normal, 1=Edge)
  - `1`: Operation (0=Stop, 1=Start)

**–ü—Ä–∏–º–µ—Ä YAML –¥–ª—è Home Assistant:**
```yaml
service: xiaomi_miot.call_action
data:
  entity_id: vacuum.xiaomi_b106bk_807e_robot_cleaner
  siid: 7
  aiid: 3
  params: ["11", 0, 1]
```

## üîç –ö–∞–∫ –±—ã–ª–∏ –Ω–∞–π–¥–µ–Ω—ã ID –∫–æ–º–Ω–∞—Ç

1. **–°–ø–∏—Å–æ–∫ –∫–æ–º–Ω–∞—Ç –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω:** –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –º–µ—Ç–æ–¥—ã `get_room_mapping` –∏ —Å–≤–æ–π—Å—Ç–≤–∞ MIoT –≤–æ–∑–≤—Ä–∞—â–∞–ª–∏ –ø—É—Å—Ç—ã–µ —Å–ø–∏—Å–∫–∏.
2. **–ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤:** –í —Ñ–∞–π–ª–µ `log.json` (–æ—Ç–≤–µ—Ç—ã –æ—Ç –ø—ã–ª–µ—Å–æ—Å–∞) –±—ã–ª –Ω–∞–π–¥–µ–Ω —Å–∫—Ä—ã—Ç—ã–π –æ—Ç–≤–µ—Ç –Ω–∞ –∫–æ–º–∞–Ω–¥—É `get-preference-ii` (Service 7, Action 10).
3. **–§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö:** –û—Ç–≤–µ—Ç —Å–æ–¥–µ—Ä–∂–∞–ª —Å—Ç—Ä–æ–∫–∏ –≤–∏–¥–∞ `1_10_1_...`, `1_11_1_...`, —á—Ç–æ —É–∫–∞–∑–∞–ª–æ –Ω–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ ID 10, 11, 12, 13.
4. **–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:** –ú–µ—Ç–æ–¥–æ–º –ø–µ—Ä–µ–±–æ—Ä–∞ –∏ –∑–∞–ø—É—Å–∫–∞ —É–±–æ—Ä–∫–∏ ("–∫—É–¥–∞ –ø–æ–µ–¥–µ—Ç") –±—ã–ª–∏ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω—ã ID –∏ —Ä–µ–∞–ª—å–Ω—ã–µ –∫–æ–º–Ω–∞—Ç—ã.

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

- `/root/docker/homeassistant/config/scripts.yaml` - –†–∞–±–æ—á–∏–µ —Å–∫—Ä–∏–ø—Ç—ã.
- `/root/vacuum_robot/` - –ü–∞–ø–∫–∞ —Å —Ö–æ–¥–æ–º —Ä–∞–±–æ—Ç –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π.
  - `00_README.md` - –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ.
  - `07_solution_report.md` - –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –æ—Ç—á–µ—Ç –æ –ø–æ–∏—Å–∫–µ –∫–æ–º–∞–Ω–¥.
  - `09_final_room_mapping.md` - –ö—Ä–∞—Ç–∫–∞—è –∫–∞—Ä—Ç–∞ –∫–æ–º–Ω–∞—Ç.
  - `log.json` - –õ–æ–≥, –≤ –∫–æ—Ç–æ—Ä–æ–º –Ω–∞—à–ª–∏ –∫–ª—é—á–∏.

## üöÄ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –Ω–∞ –±—É–¥—É—â–µ–µ

1. **–ï—Å–ª–∏ —Å–æ–±—å–µ—Ç—Å—è –∫–∞—Ä—Ç–∞:**
   - ID –∫–æ–º–Ω–∞—Ç –º–æ–≥—É—Ç –∏–∑–º–µ–Ω–∏—Ç—å—Å—è, –µ—Å–ª–∏ –ø–µ—Ä–µ—Å—Ç—Ä–æ–∏—Ç—å –∫–∞—Ä—Ç—É (—É–¥–∞–ª–∏—Ç—å –∏ —Å–æ–∑–¥–∞—Ç—å –∑–∞–Ω–æ–≤–æ).
   - –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ –Ω—É–∂–Ω–æ —Å–Ω–æ–≤–∞ –∏—Å–∫–∞—Ç—å ID (–Ω–∞—É–≥–∞–¥ 10-20 –∏–ª–∏ —á–µ—Ä–µ–∑ –ª–æ–≥–∏).
2. **–ë—ç–∫–∞–ø:** –°–∫—Ä–∏–ø—Ç—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ `scripts.yaml`. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–µ–ª–∞—Ç—å –±—ç–∫–∞–ø —ç—Ç–æ–≥–æ —Ñ–∞–π–ª–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö.

